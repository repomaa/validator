<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.34.0">
<meta name="crystal_docs.project_version" content="master">
<meta name="crystal_docs.project_name" content="athena-validator">


<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="athena-validator">
  <title>Athena::Validator - athena-validator master</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          athena-validator
        </a>
      </h1>

      <span class="project-version">
        master
      </span>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="athena-validator/ASPEC" data-name="aspec">
      <a href="../ASPEC.html">ASPEC</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Assert" data-name="assert">
      <a href="../Assert.html">Assert</a>
      
    </li>
  
  <li class="parent open current" data-id="athena-validator/Athena" data-name="athena">
      <a href="../Athena.html">Athena</a>
      
        <ul>
  
  <li class="parent " data-id="athena-validator/Athena/Spec" data-name="athena::spec">
      <a href="../Athena/Spec.html">Spec</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Spec/Methods" data-name="athena::spec::methods">
      <a href="../Athena/Spec/Methods.html">Methods</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Spec/TestCase" data-name="athena::spec::testcase">
      <a href="../Athena/Spec/TestCase.html">TestCase</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Spec/TestCase/DataProvider" data-name="athena::spec::testcase::dataprovider">
      <a href="../Athena/Spec/TestCase/DataProvider.html">DataProvider</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Spec/TestCase/Focus" data-name="athena::spec::testcase::focus">
      <a href="../Athena/Spec/TestCase/Focus.html">Focus</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Spec/TestCase/Pending" data-name="athena::spec::testcase::pending">
      <a href="../Athena/Spec/TestCase/Pending.html">Pending</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Spec/TestCase/Tags" data-name="athena::spec::testcase::tags">
      <a href="../Athena/Spec/TestCase/Tags.html">Tags</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="athena-validator/Athena/Validator" data-name="athena::validator">
      <a href="../Athena/Validator.html">Validator</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraint" data-name="athena::validator::constraint">
      <a href="../Athena/Validator/Constraint.html">Constraint</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints" data-name="athena::validator::constraints">
      <a href="../Athena/Validator/Constraints.html">Constraints</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/AbstractComparison" data-name="athena::validator::constraints::abstractcomparison(valuetype)">
      <a href="../Athena/Validator/Constraints/AbstractComparison.html">AbstractComparison</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/All" data-name="athena::validator::constraints::all">
      <a href="../Athena/Validator/Constraints/All.html">All</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/All/Validator" data-name="athena::validator::constraints::all::validator">
      <a href="../Athena/Validator/Constraints/All/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/AtLeastOneOf" data-name="athena::validator::constraints::atleastoneof">
      <a href="../Athena/Validator/Constraints/AtLeastOneOf.html">AtLeastOneOf</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/AtLeastOneOf/Validator" data-name="athena::validator::constraints::atleastoneof::validator">
      <a href="../Athena/Validator/Constraints/AtLeastOneOf/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Blank" data-name="athena::validator::constraints::blank">
      <a href="../Athena/Validator/Constraints/Blank.html">Blank</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Blank/Validator" data-name="athena::validator::constraints::blank::validator">
      <a href="../Athena/Validator/Constraints/Blank/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Callback" data-name="athena::validator::constraints::callback">
      <a href="../Athena/Validator/Constraints/Callback.html">Callback</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Callback/CallbackProc" data-name="athena::validator::constraints::callback::callbackproc">
      <a href="../Athena/Validator/Constraints/Callback/CallbackProc.html">CallbackProc</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Callback/Validator" data-name="athena::validator::constraints::callback::validator">
      <a href="../Athena/Validator/Constraints/Callback/Validator.html">Validator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Callback/Value" data-name="athena::validator::constraints::callback::value(t)">
      <a href="../Athena/Validator/Constraints/Callback/Value.html">Value</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Choice" data-name="athena::validator::constraints::choice">
      <a href="../Athena/Validator/Constraints/Choice.html">Choice</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Choice/Validator" data-name="athena::validator::constraints::choice::validator">
      <a href="../Athena/Validator/Constraints/Choice/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/ComparisonValidator" data-name="athena::validator::constraints::comparisonvalidator">
      <a href="../Athena/Validator/Constraints/ComparisonValidator.html">ComparisonValidator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Composite" data-name="athena::validator::constraints::composite">
      <a href="../Athena/Validator/Constraints/Composite.html">Composite</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Compound" data-name="athena::validator::constraints::compound">
      <a href="../Athena/Validator/Constraints/Compound.html">Compound</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Compound/Validator" data-name="athena::validator::constraints::compound::validator">
      <a href="../Athena/Validator/Constraints/Compound/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Email" data-name="athena::validator::constraints::email">
      <a href="../Athena/Validator/Constraints/Email.html">Email</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Email/Mode" data-name="athena::validator::constraints::email::mode">
      <a href="../Athena/Validator/Constraints/Email/Mode.html">Mode</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Email/Validator" data-name="athena::validator::constraints::email::validator">
      <a href="../Athena/Validator/Constraints/Email/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/EqualTo" data-name="athena::validator::constraints::equalto(valuetype)">
      <a href="../Athena/Validator/Constraints/EqualTo.html">EqualTo</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/EqualTo/Validator" data-name="athena::validator::constraints::equalto::validator">
      <a href="../Athena/Validator/Constraints/EqualTo/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/GreaterThan" data-name="athena::validator::constraints::greaterthan(valuetype)">
      <a href="../Athena/Validator/Constraints/GreaterThan.html">GreaterThan</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/GreaterThan/Validator" data-name="athena::validator::constraints::greaterthan::validator">
      <a href="../Athena/Validator/Constraints/GreaterThan/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/GreaterThanOrEqual" data-name="athena::validator::constraints::greaterthanorequal(valuetype)">
      <a href="../Athena/Validator/Constraints/GreaterThanOrEqual.html">GreaterThanOrEqual</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/GreaterThanOrEqual/Validator" data-name="athena::validator::constraints::greaterthanorequal::validator">
      <a href="../Athena/Validator/Constraints/GreaterThanOrEqual/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/GroupSequence" data-name="athena::validator::constraints::groupsequence">
      <a href="../Athena/Validator/Constraints/GroupSequence.html">GroupSequence</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/GroupSequence/Provider" data-name="athena::validator::constraints::groupsequence::provider">
      <a href="../Athena/Validator/Constraints/GroupSequence/Provider.html">Provider</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/IP" data-name="athena::validator::constraints::ip">
      <a href="../Athena/Validator/Constraints/IP.html">IP</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/IP/Validator" data-name="athena::validator::constraints::ip::validator">
      <a href="../Athena/Validator/Constraints/IP/Validator.html">Validator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/IP/Version" data-name="athena::validator::constraints::ip::version">
      <a href="../Athena/Validator/Constraints/IP/Version.html">Version</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/ISBN" data-name="athena::validator::constraints::isbn">
      <a href="../Athena/Validator/Constraints/ISBN.html">ISBN</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/ISBN/Type" data-name="athena::validator::constraints::isbn::type">
      <a href="../Athena/Validator/Constraints/ISBN/Type.html">Type</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/ISBN/Validator" data-name="athena::validator::constraints::isbn::validator">
      <a href="../Athena/Validator/Constraints/ISBN/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/IsFalse" data-name="athena::validator::constraints::isfalse">
      <a href="../Athena/Validator/Constraints/IsFalse.html">IsFalse</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/IsFalse/Validator" data-name="athena::validator::constraints::isfalse::validator">
      <a href="../Athena/Validator/Constraints/IsFalse/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/ISIN" data-name="athena::validator::constraints::isin">
      <a href="../Athena/Validator/Constraints/ISIN.html">ISIN</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/ISIN/Validator" data-name="athena::validator::constraints::isin::validator">
      <a href="../Athena/Validator/Constraints/ISIN/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/IsNil" data-name="athena::validator::constraints::isnil">
      <a href="../Athena/Validator/Constraints/IsNil.html">IsNil</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/IsNil/Validator" data-name="athena::validator::constraints::isnil::validator">
      <a href="../Athena/Validator/Constraints/IsNil/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/ISSN" data-name="athena::validator::constraints::issn">
      <a href="../Athena/Validator/Constraints/ISSN.html">ISSN</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/ISSN/Validator" data-name="athena::validator::constraints::issn::validator">
      <a href="../Athena/Validator/Constraints/ISSN/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/IsTrue" data-name="athena::validator::constraints::istrue">
      <a href="../Athena/Validator/Constraints/IsTrue.html">IsTrue</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/IsTrue/Validator" data-name="athena::validator::constraints::istrue::validator">
      <a href="../Athena/Validator/Constraints/IsTrue/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/LessThan" data-name="athena::validator::constraints::lessthan(valuetype)">
      <a href="../Athena/Validator/Constraints/LessThan.html">LessThan</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/LessThan/Validator" data-name="athena::validator::constraints::lessthan::validator">
      <a href="../Athena/Validator/Constraints/LessThan/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/LessThanOrEqual" data-name="athena::validator::constraints::lessthanorequal(valuetype)">
      <a href="../Athena/Validator/Constraints/LessThanOrEqual.html">LessThanOrEqual</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/LessThanOrEqual/Validator" data-name="athena::validator::constraints::lessthanorequal::validator">
      <a href="../Athena/Validator/Constraints/LessThanOrEqual/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Luhn" data-name="athena::validator::constraints::luhn">
      <a href="../Athena/Validator/Constraints/Luhn.html">Luhn</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Luhn/Validator" data-name="athena::validator::constraints::luhn::validator">
      <a href="../Athena/Validator/Constraints/Luhn/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Negative" data-name="athena::validator::constraints::negative">
      <a href="../Athena/Validator/Constraints/Negative.html">Negative</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/NegativeOrZero" data-name="athena::validator::constraints::negativeorzero">
      <a href="../Athena/Validator/Constraints/NegativeOrZero.html">NegativeOrZero</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/NotBlank" data-name="athena::validator::constraints::notblank">
      <a href="../Athena/Validator/Constraints/NotBlank.html">NotBlank</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/NotBlank/Validator" data-name="athena::validator::constraints::notblank::validator">
      <a href="../Athena/Validator/Constraints/NotBlank/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/NotEqualTo" data-name="athena::validator::constraints::notequalto(valuetype)">
      <a href="../Athena/Validator/Constraints/NotEqualTo.html">NotEqualTo</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/NotEqualTo/Validator" data-name="athena::validator::constraints::notequalto::validator">
      <a href="../Athena/Validator/Constraints/NotEqualTo/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/NotNil" data-name="athena::validator::constraints::notnil">
      <a href="../Athena/Validator/Constraints/NotNil.html">NotNil</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/NotNil/Validator" data-name="athena::validator::constraints::notnil::validator">
      <a href="../Athena/Validator/Constraints/NotNil/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Positive" data-name="athena::validator::constraints::positive">
      <a href="../Athena/Validator/Constraints/Positive.html">Positive</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/PositiveOrZero" data-name="athena::validator::constraints::positiveorzero">
      <a href="../Athena/Validator/Constraints/PositiveOrZero.html">PositiveOrZero</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Range" data-name="athena::validator::constraints::range">
      <a href="../Athena/Validator/Constraints/Range.html">Range</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Range/Validator" data-name="athena::validator::constraints::range::validator">
      <a href="../Athena/Validator/Constraints/Range/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Regex" data-name="athena::validator::constraints::regex">
      <a href="../Athena/Validator/Constraints/Regex.html">Regex</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Regex/Validator" data-name="athena::validator::constraints::regex::validator">
      <a href="../Athena/Validator/Constraints/Regex/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Sequentially" data-name="athena::validator::constraints::sequentially">
      <a href="../Athena/Validator/Constraints/Sequentially.html">Sequentially</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Sequentially/Validator" data-name="athena::validator::constraints::sequentially::validator">
      <a href="../Athena/Validator/Constraints/Sequentially/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Size" data-name="athena::validator::constraints::size">
      <a href="../Athena/Validator/Constraints/Size.html">Size</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Size/Validator" data-name="athena::validator::constraints::size::validator">
      <a href="../Athena/Validator/Constraints/Size/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Unique" data-name="athena::validator::constraints::unique">
      <a href="../Athena/Validator/Constraints/Unique.html">Unique</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Unique/Validator" data-name="athena::validator::constraints::unique::validator">
      <a href="../Athena/Validator/Constraints/Unique/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/URL" data-name="athena::validator::constraints::url">
      <a href="../Athena/Validator/Constraints/URL.html">URL</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/URL/Validator" data-name="athena::validator::constraints::url::validator">
      <a href="../Athena/Validator/Constraints/URL/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Constraints/Valid" data-name="athena::validator::constraints::valid">
      <a href="../Athena/Validator/Constraints/Valid.html">Valid</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Constraints/Valid/Validator" data-name="athena::validator::constraints::valid::validator">
      <a href="../Athena/Validator/Constraints/Valid/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ConstraintValidator" data-name="athena::validator::constraintvalidator">
      <a href="../Athena/Validator/ConstraintValidator.html">ConstraintValidator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ConstraintValidatorFactory" data-name="athena::validator::constraintvalidatorfactory">
      <a href="../Athena/Validator/ConstraintValidatorFactory.html">ConstraintValidatorFactory</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ConstraintValidatorFactoryInterface" data-name="athena::validator::constraintvalidatorfactoryinterface">
      <a href="../Athena/Validator/ConstraintValidatorFactoryInterface.html">ConstraintValidatorFactoryInterface</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ConstraintValidatorInterface" data-name="athena::validator::constraintvalidatorinterface">
      <a href="../Athena/Validator/ConstraintValidatorInterface.html">ConstraintValidatorInterface</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Exceptions" data-name="athena::validator::exceptions">
      <a href="../Athena/Validator/Exceptions.html">Exceptions</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Exceptions/UnexpectedValueError" data-name="athena::validator::exceptions::unexpectedvalueerror">
      <a href="../Athena/Validator/Exceptions/UnexpectedValueError.html">UnexpectedValueError</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Exceptions/ValidatorError" data-name="athena::validator::exceptions::validatorerror">
      <a href="../Athena/Validator/Exceptions/ValidatorError.html">ValidatorError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ExecutionContext" data-name="athena::validator::executioncontext(root)">
      <a href="../Athena/Validator/ExecutionContext.html">ExecutionContext</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ExecutionContextInterface" data-name="athena::validator::executioncontextinterface">
      <a href="../Athena/Validator/ExecutionContextInterface.html">ExecutionContextInterface</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Metadata" data-name="athena::validator::metadata">
      <a href="../Athena/Validator/Metadata.html">Metadata</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/CascadingStrategy" data-name="athena::validator::metadata::cascadingstrategy">
      <a href="../Athena/Validator/Metadata/CascadingStrategy.html">CascadingStrategy</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/ClassMetadata" data-name="athena::validator::metadata::classmetadata(t)">
      <a href="../Athena/Validator/Metadata/ClassMetadata.html">ClassMetadata</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/GenericMetadata" data-name="athena::validator::metadata::genericmetadata">
      <a href="../Athena/Validator/Metadata/GenericMetadata.html">GenericMetadata</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/GetterMetadata" data-name="athena::validator::metadata::gettermetadata(entitytype, methodidx)">
      <a href="../Athena/Validator/Metadata/GetterMetadata.html">GetterMetadata</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/MetadataFactory" data-name="athena::validator::metadata::metadatafactory">
      <a href="../Athena/Validator/Metadata/MetadataFactory.html">MetadataFactory</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/MetadataFactoryInterface" data-name="athena::validator::metadata::metadatafactoryinterface">
      <a href="../Athena/Validator/Metadata/MetadataFactoryInterface.html">MetadataFactoryInterface</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/MetadataInterface" data-name="athena::validator::metadata::metadatainterface">
      <a href="../Athena/Validator/Metadata/MetadataInterface.html">MetadataInterface</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/PropertyMetadata" data-name="athena::validator::metadata::propertymetadata(entitytype, propertyidx)">
      <a href="../Athena/Validator/Metadata/PropertyMetadata.html">PropertyMetadata</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Metadata/PropertyMetadataInterface" data-name="athena::validator::metadata::propertymetadatainterface">
      <a href="../Athena/Validator/Metadata/PropertyMetadataInterface.html">PropertyMetadataInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/PropertyPath" data-name="athena::validator::propertypath">
      <a href="../Athena/Validator/PropertyPath.html">PropertyPath</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/ServiceConstraintValidator" data-name="athena::validator::serviceconstraintvalidator">
      <a href="../Athena/Validator/ServiceConstraintValidator.html">ServiceConstraintValidator</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Spec" data-name="athena::validator::spec">
      <a href="../Athena/Validator/Spec.html">Spec</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/ComparisonConstraintValidatorTestCase" data-name="athena::validator::spec::comparisonconstraintvalidatortestcase">
      <a href="../Athena/Validator/Spec/ComparisonConstraintValidatorTestCase.html">ComparisonConstraintValidatorTestCase</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Spec/ConstraintValidatorTestCase" data-name="athena::validator::spec::constraintvalidatortestcase">
      <a href="../Athena/Validator/Spec/ConstraintValidatorTestCase.html">ConstraintValidatorTestCase</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/ConstraintValidatorTestCase/Assertion" data-name="athena::validator::spec::constraintvalidatortestcase::assertion">
      <a href="../Athena/Validator/Spec/ConstraintValidatorTestCase/Assertion.html">Assertion</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/EntityGroupSequenceProvider" data-name="athena::validator::spec::entitygroupsequenceprovider">
      <a href="../Athena/Validator/Spec/EntityGroupSequenceProvider.html">EntityGroupSequenceProvider</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/EntitySequenceProvider" data-name="athena::validator::spec::entitysequenceprovider">
      <a href="../Athena/Validator/Spec/EntitySequenceProvider.html">EntitySequenceProvider</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Spec/FailingConstraint" data-name="athena::validator::spec::failingconstraint">
      <a href="../Athena/Validator/Spec/FailingConstraint.html">FailingConstraint</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/FailingConstraint/Validator" data-name="athena::validator::spec::failingconstraint::validator">
      <a href="../Athena/Validator/Spec/FailingConstraint/Validator.html">Validator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/MockContextualValidator" data-name="athena::validator::spec::mockcontextualvalidator">
      <a href="../Athena/Validator/Spec/MockContextualValidator.html">MockContextualValidator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/MockMetadataFactory" data-name="athena::validator::spec::mockmetadatafactory(t1, t2, t3, t4, t5)">
      <a href="../Athena/Validator/Spec/MockMetadataFactory.html">MockMetadataFactory</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Spec/MockValidator" data-name="athena::validator::spec::mockvalidator">
      <a href="../Athena/Validator/Spec/MockValidator.html">MockValidator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Validatable" data-name="athena::validator::validatable">
      <a href="../Athena/Validator/Validatable.html">Validatable</a>
      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Validator" data-name="athena::validator::validator">
      <a href="../Athena/Validator/Validator.html">Validator</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Validator/ContextualValidatorInterface" data-name="athena::validator::validator::contextualvalidatorinterface">
      <a href="../Athena/Validator/Validator/ContextualValidatorInterface.html">ContextualValidatorInterface</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Validator/RecursiveContextualValidator" data-name="athena::validator::validator::recursivecontextualvalidator">
      <a href="../Athena/Validator/Validator/RecursiveContextualValidator.html">RecursiveContextualValidator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Validator/RecursiveValidator" data-name="athena::validator::validator::recursivevalidator">
      <a href="../Athena/Validator/Validator/RecursiveValidator.html">RecursiveValidator</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Validator/ValidatorInterface" data-name="athena::validator::validator::validatorinterface">
      <a href="../Athena/Validator/Validator/ValidatorInterface.html">ValidatorInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena-validator/Athena/Validator/Violation" data-name="athena::validator::violation">
      <a href="../Athena/Validator/Violation.html">Violation</a>
      
        <ul>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Violation/ConstraintViolation" data-name="athena::validator::violation::constraintviolation(root)">
      <a href="../Athena/Validator/Violation/ConstraintViolation.html">ConstraintViolation</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Violation/ConstraintViolationBuilder" data-name="athena::validator::violation::constraintviolationbuilder(root)">
      <a href="../Athena/Validator/Violation/ConstraintViolationBuilder.html">ConstraintViolationBuilder</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Violation/ConstraintViolationBuilderInterface" data-name="athena::validator::violation::constraintviolationbuilderinterface">
      <a href="../Athena/Validator/Violation/ConstraintViolationBuilderInterface.html">ConstraintViolationBuilderInterface</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Violation/ConstraintViolationInterface" data-name="athena::validator::violation::constraintviolationinterface">
      <a href="../Athena/Validator/Violation/ConstraintViolationInterface.html">ConstraintViolationInterface</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Violation/ConstraintViolationList" data-name="athena::validator::violation::constraintviolationlist">
      <a href="../Athena/Validator/Violation/ConstraintViolationList.html">ConstraintViolationList</a>
      
    </li>
  
  <li class=" " data-id="athena-validator/Athena/Validator/Violation/ConstraintViolationListInterface" data-name="athena::validator::violation::constraintviolationlistinterface">
      <a href="../Athena/Validator/Violation/ConstraintViolationListInterface.html">ConstraintViolationListInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena-validator/AVD" data-name="avd">
      <a href="../AVD.html">AVD</a>
      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">module</span> Athena::Validator

</h1>





  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>Athena's Validation component, <code><a href="../AVD.html">AVD</a></code> for short, adds an object/value validation framework to your project.
The framework consists of <code><a href="../Athena/Validator/Constraint.html">AVD::Constraint</a></code>s that describe some assertion; such as a string should be <code><a href="../Athena/Validator/Constraints/NotBlank.html">AVD::Constraints::NotBlank</a></code>
or that a value is <code><a href="../Athena/Validator/Constraints/GreaterThanOrEqual.html">AVD::Constraints::GreaterThanOrEqual</a></code> another value.
Constraints, along with a value, are then passed to an <code><a href="../Athena/Validator/ConstraintValidatorInterface.html">AVD::ConstraintValidatorInterface</a></code> that actually performs the validation, using the data defined in the constraint.
If the validator determines that the value is invalid in some way, it creates and adds an <code><a href="../Athena/Validator/Violation/ConstraintViolationInterface.html">AVD::Violation::ConstraintViolationInterface</a></code> to this runs' <code><a href="../Athena/Validator/ExecutionContextInterface.html">AVD::ExecutionContextInterface</a></code>.
The <code><a href="../Athena/Validator/Validator/ValidatorInterface.html">AVD::Validator::ValidatorInterface</a></code> then returns an <code><a href="../Athena/Validator/Violation/ConstraintViolationListInterface.html">AVD::Violation::ConstraintViolationListInterface</a></code> that contains all the violations.  The value can be considered valid if that list is empty.</p>

<p><span class="flag purple">NOTE</span>  See each type individually for more detailed information.</p>

<h2><a id="getting-started" class="anchor" href="#getting-started">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Getting Started</h2>

<p><code><a href="../Athena/Validator.html">Athena::Validator</a></code> comes with a set of common <code><a href="../Athena/Validator/Constraints.html">AVD::Constraints</a></code> built in that any project could find useful.
When used on its own, the <code><a href="../Athena/Validator.html#validator:AVD::Validator::ValidatorInterface-class-method">Athena::Validator.validator</a></code> method can be used to obtain an <code><a href="../Athena/Validator/Validator/ValidatorInterface.html">AVD::Validator::ValidatorInterface</a></code> instance
to validate a given value/object.</p>

<h3><a id="basics" class="anchor" href="#basics">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Basics</h3>

<p>A validator accepts a value, and one or more <code><a href="../Athena/Validator/Constraint.html">AVD::Constraint</a></code> to validate the value against.
The validator then returns an <code><a href="../Athena/Validator/Violation/ConstraintViolationListInterface.html">AVD::Violation::ConstraintViolationListInterface</a></code> that includes all the violations, if any.</p>

<pre><code><span class="c"># Obtain a validator instance.</span>
validator <span class="o">=</span> <span class="t">AVD</span>.validator

<span class="c"># Use the validator to validate a value.</span>
violations <span class="o">=</span> validator.validate <span class="s">&quot;foo&quot;</span>, <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">NotBlank</span>.<span class="k">new</span>

<span class="c"># The validator returns an empty list of violations, indicating the value is valid.</span>
violations.inspect <span class="c"># =&gt; Athena::Validator::Violation::ConstraintViolationList(@violations=[])</span></code></pre>

<p>In this case it returns an empty list of violations, meaning the value is valid.</p>

<pre><code><span class="c"># Using the validator instance from the previous example</span>
violations <span class="o">=</span> validator.validate <span class="s">&quot;&quot;</span>, <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">NotBlank</span>.<span class="k">new</span>

violations.inspect <span class="c"># =&gt;</span>
<span class="c"># Athena::Validator::Violation::ConstraintViolationList(</span>
<span class="c">#   @violations=</span>
<span class="c">#     [Athena::Validator::Violation::ConstraintViolation(String)(</span>
<span class="c">#     @cause=nil,</span>
<span class="c">#     @code=&quot;0d0c3254-3642-4cb0-9882-46ee5918e6e3&quot;,</span>
<span class="c">#     @constraint=</span>
<span class="c">#       #&lt;Athena::Validator::Constraints::NotBlank:0x7f97da08ced0</span>
<span class="c">#       @allow_nil=false,</span>
<span class="c">#       @groups=[&quot;default&quot;],</span>
<span class="c">#       @message=&quot;This value should not be blank.&quot;,</span>
<span class="c">#       @payload=nil&gt;,</span>
<span class="c">#     @invalid_value_container=</span>
<span class="c">#       Athena::Validator::ValueContainer(String)(@value=&quot;&quot;),</span>
<span class="c">#     @message=&quot;This value should not be blank.&quot;,</span>
<span class="c">#     @message_template=&quot;This value should not be blank.&quot;,</span>
<span class="c">#     @parameters={&quot;{{ value }}&quot; =&gt; &quot;&quot;},</span>
<span class="c">#     @plural=nil,</span>
<span class="c">#     @property_path=&quot;&quot;,</span>
<span class="c">#     @root=&quot;&quot;)])</span>

<span class="c"># Both the ConstraintViolationList and ConstraintViolation implement a `#to_s` method.</span>
puts violations <span class="c"># =&gt;</span>
<span class="c"># :</span>
<span class="c">#   This value should not be blank. (code: 0d0c3254-3642-4cb0-9882-46ee5918e6e3)</span></code></pre>

<p>However in the case of the value <em>NOT</em> being valid, the list includes all of the <code><a href="../Athena/Validator/Violation/ConstraintViolationInterface.html">AVD::Violation::ConstraintViolationInterface</a></code>s produced during this run.
Each violation includes some metadata; such as the related constraint that failed, a machine readable code, a human readable message, any parameters
that should be used to render that message, etc.  The extra context allows for a lot of flexibility; both in terms of how the error could be rendered or handled.</p>

<p>By default, in addition to any constraint specific arguments, the majority of the constraints have three optional arguments: <code>message</code>, <code>groups</code>, and <code>payload</code>.</p>

<ul><li>The <code>message</code> argument represents the message that should be used if the value is found to not be valid.
The message can also include placeholders, in the form of <code>{{ key }}</code>, that will be replaced when the message is rendered.
Most commonly this includes the invalid value itself, but some constraints have additional placeholders.</li><li>The <code>payload</code> argument can be used to attach any domain specific data to the constraint; such as attaching a severity with each constraint
to have more serious violations be handled differently.</li><li>The <code>groups</code> argument can be used to run a subset of the defined constraints.  More on this in the <a href="#validation-groups" target="_blank">Validation Groups</a> section.</li></ul>

<pre><code>validator <span class="o">=</span> <span class="t">AVD</span>.validator

<span class="c"># Instantiate a constraint with a custom message, using a placeholder.</span>
violations <span class="o">=</span> validator.validate <span class="n">-4</span>, <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">PositiveOrZero</span>.<span class="k">new</span> message: <span class="s">&quot;{{ value }} is not a valid age.  A user cannot have a negative age.&quot;</span>

puts violations <span class="c"># =&gt;</span>
<span class="c"># -4:</span>
<span class="c">#   -4 is not a valid age.  A user cannot have a negative age. (code: e09e52d0-b549-4ba1-8b4e-420aad76f0de)</span></code></pre>

<p>Customizing the message can be a good way for those consuming the errors to determine <em>WHY</em> a given value is not valid.</p>

<h3><a id="validating-objects" class="anchor" href="#validating-objects">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Validating Objects</h3>

<p>Validating arbitrary values against a set of arbitrary constraints can be useful in smaller applications and/or for one off use cases.
However to keep in line with our Object Oriented Programming (OOP) principles, we can also validate objects.  The object could be either a struct or a class.
The only requirements are that the object includes a specific module, <code><a href="../Athena/Validator/Validatable.html">AVD::Validatable</a></code>, and specifies which properties should be validated and against what constraints.
The easiest/most common way to do this is via annotations and the <code><a href="../Assert.html">Assert</a></code> alias.</p>

<pre><code><span class="c"># Define a class that can be validated.</span>
<span class="k">class</span> <span class="t">User</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Validatable</span>

  <span class="k">def</span> <span class="m">initialize</span>(@name : <span class="t">String</span>, @age : <span class="t">Int32</span>? <span class="o">=</span> <span class="n">nil</span>); <span class="k">end</span>

  <span class="c"># Specify that we want to assert that the user&#39;s name is not blank.</span>
  <span class="c"># Multiple constraints can be defined on a single property.</span>
  @[<span class="t">Assert</span><span class="t">::</span><span class="t">NotBlank</span>]
  getter name : <span class="t">String</span>

  <span class="c"># Arguments to the constraint can be used normally as well.</span>
  <span class="c"># The constraint&#39;s default argument can also be supplied positionally: `@[Assert::GreaterThan(0)]`.</span>
  @[<span class="t">Assert</span><span class="t">::</span><span class="t">NotNil</span>(message: <span class="s">&quot;A user&#39;s age cannot be null&quot;</span>)]
  getter age : <span class="t">Int32</span>?
<span class="k">end</span>

<span class="c"># Obtain a validator instance.</span>
validator <span class="o">=</span> <span class="t">AVD</span>.validator

<span class="c"># Validate a user instance, notice we&#39;re not passing in any constraints.</span>
validator.validate(<span class="t">User</span>.<span class="k">new</span>(<span class="s">&quot;Jim&quot;</span>, <span class="n">10</span>)).empty? <span class="c"># =&gt; true</span>
validator.validate <span class="t">User</span>.<span class="k">new</span> <span class="s">&quot;&quot;</span>, <span class="n">10</span>             <span class="c"># =&gt;</span>
<span class="c"># Object(User).name:</span>
<span class="c">#   This value should not be blank. (code: 0d0c3254-3642-4cb0-9882-46ee5918e6e3)</span></code></pre>

<p>Notice that in this case we do not need to supply the constraints to the <code>#validate</code> method.
This is because the validator is able to extract them from the annotations on the properties.
An array of constraints can still be supplied, and will take precedence over the constraints defined within the type.</p>

<p><span class="flag purple">NOTE</span>  By default if a property's value is another object, the sub object will not be validated.
use the <code><a href="../Athena/Validator/Constraints/Valid.html">AVD::Constraints::Valid</a></code> constraint if you wish to also validate the sub object.
This also applies to arrays of objects.</p>

<p>Another important thing to point out is that no custom DSL is required to define these constraints.
<code><a href="../Athena/Validator.html">Athena::Validator</a></code> is intended to be a generic validation solution that could be used outside of the <a href="https://github.com/athena-framework" target="_blank">Athena</a> ecosystem.
However, in order to be able to use the annotation based approach, you need to be able to apply the annotations to the underlying properties.
If this is not possible due to how a specific type is implemented, or if you just don't like the annotation syntax, the type can also be configured via code.</p>

<pre><code><span class="c"># Define a class that can be validated.</span>
<span class="k">class</span> <span class="t">User</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Validatable</span>

  <span class="c"># This class method is invoked when building the metadata associated with a type,</span>
  <span class="c"># and can be used to manually wire up the constraints.</span>
  <span class="k">def</span> <span class="m">self</span>.load_metadata(metadata : <span class="t">AVD</span><span class="t">::</span><span class="t">Metadata</span><span class="t">::</span><span class="t">ClassMetadata</span>) : <span class="t">Nil</span>
    metadata.add_property_constraint <span class="s">&quot;name&quot;</span>, <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">NotBlank</span>.<span class="k">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">initialize</span>(@name : <span class="t">String</span>); <span class="k">end</span>

  getter name : <span class="t">String</span>
<span class="k">end</span>

<span class="c"># Obtain a validator instance.</span>
validator <span class="o">=</span> <span class="t">AVD</span>.validator

<span class="c"># Validate a user instance, notice we&#39;re not passing in any constraints.</span>
validator.validate(<span class="t">User</span>.<span class="k">new</span>(<span class="s">&quot;Jim&quot;</span>)).empty? <span class="c"># =&gt; true</span>
validator.validate <span class="t">User</span>.<span class="k">new</span> <span class="s">&quot;&quot;</span>             <span class="c"># =&gt;</span>
<span class="c"># Object(User).name:</span>
<span class="c">#   This value should not be blank. (code: 0d0c3254-3642-4cb0-9882-46ee5918e6e3)</span></code></pre>

<p>The metadata for each type is lazily loaded when an instance of that type is validated, and is only built once.
See <code><a href="../Athena/Validator/Metadata/ClassMetadata.html">AVD::Metadata::ClassMetadata</a></code> for some additional ways to register property constraints.</p>

<h4><a id="getters" class="anchor" href="#getters">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Getters</h4>

<p>Constraints can also be applied to getter methods of an object.
This allows for dynamic validations based on the return value of the method.
For example, say we wanted to assert that a user's name is not the same as their password.</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Validatable</span>

  property name : <span class="t">String</span>
  property password : <span class="t">String</span>

  <span class="k">def</span> <span class="m">initialize</span>(@name : <span class="t">String</span>, @password : <span class="t">String</span>); <span class="k">end</span>

  @[<span class="t">Assert</span><span class="t">::</span><span class="t">IsTrue</span>(message: <span class="s">&quot;Your password cannot be the same as your name.&quot;</span>)]
  <span class="k">def</span> <span class="m">is_safe_password?</span> : <span class="t">Bool</span>
    @name <span class="o">!=</span> @password
  <span class="k">end</span>
<span class="k">end</span>

validator <span class="o">=</span> <span class="t">AVD</span>.validator

user <span class="o">=</span> <span class="t">User</span>.<span class="k">new</span> <span class="s">&quot;foo&quot;</span>, <span class="s">&quot;foo&quot;</span>

validator.validate(user).empty? <span class="c"># =&gt; false</span>

user.password <span class="o">=</span> <span class="s">&quot;bar&quot;</span>

validator.validate(user).empty? <span class="c"># =&gt; true</span></code></pre>

<h3><a id="custom-constraints" class="anchor" href="#custom-constraints">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Custom Constraints</h3>

<p>If the built in <code><a href="../Athena/Validator/Constraints.html">AVD::Constraints</a></code> are not sufficient to handle validating a given value/object; custom ones can be defined.
Let's make a new constraint that asserts a string contains only alphanumeric characters.</p>

<p>This is accomplished by first defining a new class within the <code><a href="../Athena/Validator/Constraints.html">AVD::Constraints</a></code> namespace that inherits from <code><a href="../Athena/Validator/Constraint.html">AVD::Constraint</a></code>.
Then define a <code><a href="../Athena/Validator/Validator.html">Validator</a></code> struct within our constraint that inherits from <code><a href="../Athena/Validator/ConstraintValidator.html">AVD::ConstraintValidator</a></code> that actually implements the validation logic.</p>

<pre><code><span class="k">class</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">AlphaNumeric</span> <span class="o">&lt;</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Constraint</span>
  <span class="c"># (Optional) A unique error code can also be defined to provide a machine readable identifier for a specific error.</span>
  <span class="t">NOT_ALPHANUMERIC_ERROR</span> <span class="o">=</span> <span class="s">&quot;1a83a8bd-ff79-4d5c-96e7-86d0b25b8a09&quot;</span>

  <span class="c"># (Optional) Allows using the `.error_message(code : String) : String` method with this constraint.</span>
  @@error_names <span class="o">=</span> {
    <span class="t">NOT_ALPHANUMERIC_ERROR</span> => <span class="s">&quot;NOT_ALPHANUMERIC_ERROR&quot;</span>,
  }

  <span class="c"># Define an initializer with our default message, and any additional arguments specific to this constraint.</span>
  <span class="k">def</span> <span class="m">initialize</span>(
    message : <span class="t">String</span> <span class="o">=</span> <span class="s">&quot;This value should contain only alphanumeric characters.&quot;</span>,
    groups : <span class="t">Array</span>(<span class="t">String</span>) <span class="o">|</span> <span class="t">String</span> <span class="o">|</span> <span class="t">Nil</span> <span class="o">=</span> <span class="n">nil</span>,
    payload : <span class="t">Hash</span>(<span class="t">String</span>, <span class="t">String</span>)? <span class="o">=</span> <span class="n">nil</span>
  )
    <span class="k">super</span> message, groups, payload
  <span class="k">end</span>

  <span class="c"># Define the validator within our constraint that&#39;ll contain our validation logic.</span>
  <span class="k">struct</span> <span class="t">Validator</span> <span class="o">&lt;</span> <span class="t">AVD</span><span class="t">::</span><span class="t">ConstraintValidator</span>
    <span class="c"># Define our validate method that accepts the value to be validated, and the constraint.</span>
    <span class="c">#</span>
    <span class="c"># Overloads can be used to filter values of specific types.</span>
    <span class="k">def</span> <span class="m">validate</span>(value : UNDERSCORE, constraint : <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">AlphaNumeric</span>) : <span class="t">Nil</span>
      <span class="c"># Custom constraints should ignore nil and empty values to allow</span>
      <span class="c"># other constraints (NotBlank, NotNil, etc.) take care of that</span>
      <span class="k">return</span> <span class="k">if</span> value.<span class="k">nil?</span> || value <span class="o">==</span> <span class="s">&quot;&quot;</span>

      <span class="c"># We&#39;ll cast the value to a string,</span>
      <span class="c"># alternatively we could just ignore non `String?` values.</span>
      value <span class="o">=</span> value.to_s

      <span class="c"># If all the characters of this string are alphanumeric, then it is valid</span>
      <span class="k">return</span> <span class="k">if</span> value.each_char.all? <span class="o">&amp;</span>.alphanumeric?

      <span class="c"># Otherwise, it is invalid and we need to add a violation,</span>
      <span class="c"># see `AVD::ExecutionContextInterface` for additional information.</span>
      <span class="k">self</span>.context.add_violation constraint.message, <span class="t">NOT_ALPHANUMERIC_ERROR</span>, value
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

puts <span class="t">AVD</span>.validator.validate <span class="s">&quot;$&quot;</span>, <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">AlphaNumeric</span>.<span class="k">new</span> <span class="c"># =&gt;</span>
<span class="c"># $:</span>
<span class="c">#   This value should contain only alphanumeric characters. (code: 1a83a8bd-ff79-4d5c-96e7-86d0b25b8a09)</span></code></pre>

<p><span class="flag purple">NOTE</span>  The constraint <em>MUST</em> be defined within the <code><a href="../Athena/Validator/Constraints.html">AVD::Constraints</a></code> namespace for implementation reasons.  This may change in the future.</p>

<p>We are now able to use this constraint as we would one of the built in ones;
either by manually instantiating it, or applying an <code>@[Assert::AlphaNumeric]</code> annotation to a property.</p>

<p>See <code><a href="../Athena/Validator/ConstraintValidatorInterface.html">AVD::ConstraintValidatorInterface</a></code> for more information on custom validators.</p>

<h3><a id="validation-groups" class="anchor" href="#validation-groups">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Validation Groups</h3>

<p>By default when validating an object, all constraints defined on that type will be checked.
However, in some cases you may only want to validate the object against <em>some</em> of those constraints.
This can be accomplished via assigning each constraint to a validation group, then apply validation against one specific group of constraints.</p>

<p>For example, using our <code>User</code> class from earlier, say we only want to validate certain properties when the user is first created.
To do this we can utilize the <code>groups</code> argument that all constraints have.</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Validatable</span>

  <span class="k">def</span> <span class="m">initialize</span>(@email : <span class="t">String</span>, @password : <span class="t">String</span>, @city : <span class="t">String</span>); <span class="k">end</span>

  @[<span class="t">Assert</span><span class="t">::</span><span class="t">Email</span>(groups: <span class="s">&quot;create&quot;</span>)]
  getter email : <span class="t">String</span>

  @[<span class="t">Assert</span><span class="t">::</span><span class="t">NotBlank</span>(groups: <span class="s">&quot;create&quot;</span>)]
  @[<span class="t">Assert</span><span class="t">::</span><span class="t">Size</span>(<span class="n">7</span>.., groups: <span class="s">&quot;create&quot;</span>)]
  getter password : <span class="t">String</span>

  @[<span class="t">Assert</span><span class="t">::</span><span class="t">Size</span>(<span class="n">2</span>..)]
  getter city : <span class="t">String</span>
<span class="k">end</span>

user <span class="o">=</span> <span class="t">User</span>.<span class="k">new</span> <span class="s">&quot;george@dietrich.app&quot;</span>, <span class="s">&quot;monkey123&quot;</span>, <span class="s">&quot;&quot;</span>

<span class="c"># Validate the user object, but only for those in the &quot;create&quot; group,</span>
<span class="c"># if no groups are supplied, then all constraints in the &quot;default&quot; group will be used.</span>
violations <span class="o">=</span> <span class="t">AVD</span>.validator.validate user, groups: <span class="s">&quot;create&quot;</span>

<span class="c"># There are no violations since the city&#39;s size is not validated since it&#39;s not in the &quot;create&quot; group.</span>
violations.empty? <span class="c"># =&gt; true</span></code></pre>

<p>See <code><a href="../Athena/Validator/Constraint.html">AVD::Constraint</a>@validation-groups</code> for some expanded information.</p>

<h3><a id="sequential-validation" class="anchor" href="#sequential-validation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Sequential Validation</h3>

<p>By default, all constraints are validated in a single "batch".  I.e. all constraints within the provided group(s) are validated, without regard
to if the previous/next constraint is/was (in)valid.  However, an <code><a href="../Athena/Validator/Constraints/GroupSequence.html">AVD::Constraints::GroupSequence</a></code> can be used to validate batches of constraints in steps.
I.e. validate the first "batch" of constraints, and only advance to the next batch if all constraints in that step are valid.</p>

<pre><code>@[<span class="t">Assert</span><span class="t">::</span><span class="t">GroupSequence</span>(<span class="s">&quot;User&quot;</span>, <span class="s">&quot;Secondary&quot;</span>)]
<span class="k">class</span> <span class="t">User</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Validatable</span>

  @[<span class="t">Assert</span><span class="t">::</span><span class="t">NotBlank</span>]
  getter username : <span class="t">String</span>

  @[<span class="t">Assert</span><span class="t">::</span><span class="t">NotBlank</span>(groups: <span class="s">&quot;Secondary&quot;</span>)]
  getter password : <span class="t">String</span>

  <span class="k">def</span> <span class="m">initialize</span>(@username : <span class="t">String</span>, @password : <span class="t">String</span>); <span class="k">end</span>
<span class="k">end</span>

<span class="c"># Instantiate a new `User` object where both properties are invalid.</span>
user <span class="o">=</span> <span class="t">User</span>.<span class="k">new</span> <span class="s">&quot;&quot;</span>, <span class="s">&quot;&quot;</span>

<span class="c"># Notice there is only one violation since there was a violation in the `User` group,</span>
<span class="c"># it did not advance to the `Secondary` group.</span>
<span class="t">AVD</span>.validator.validate user <span class="c"># =&gt;</span>
<span class="c"># Object(User).username:</span>
<span class="c">#   This value should not be blank. (code: 0d0c3254-3642-4cb0-9882-46ee5918e6e3)</span></code></pre>

<h4><a id="group-sequence-providers" class="anchor" href="#group-sequence-providers">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Group Sequence Providers</h4>

<p>The <code><a href="../Athena/Validator/Constraints/GroupSequence.html">AVD::Constraints::GroupSequence</a></code> can be a useful tool for creating efficient validations, but it is quite limiting since the sequence is static on the type.
If more flexibility is required the <code><a href="../Athena/Validator/Constraints/GroupSequence/Provider.html">AVD::Constraints::GroupSequence::Provider</a></code> module can be included into a type.
The module allows the object to return the sequence it should use dynamically at runtime.</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Validatable</span>
  <span class="k">include</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">GroupSequence</span><span class="t">::</span><span class="t">Provider</span>

  <span class="c"># ...</span>

  <span class="k">def</span> <span class="m">group_sequence</span> : <span class="t">Array</span>(<span class="t">Array</span>(<span class="t">String</span>) <span class="o">|</span> <span class="t">String</span>) <span class="o">|</span> <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">GroupSequence</span>
    <span class="c"># Build out and return the sequence `self` should use.</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre>

<p>Alternatively, if you only want to apply constraints sequentially on a single property,
the <code><a href="../Athena/Validator/Constraints/Sequentially.html">AVD::Constraints::Sequentially</a></code> constraint can be used to do this in a simpler way.</p>

<p><span class="flag purple">NOTE</span>  See the related types for more detailed information.</p>














  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/athena-framework/validator/blob/f63e700e77ee3e7f198c2d34197b4e1f29fd69e4/src/athena-validator.cr#L385" target="_blank">
        athena-validator.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/athena-framework/validator/blob/f63e700e77ee3e7f198c2d34197b4e1f29fd69e4/src/constraint.cr#L255" target="_blank">
        constraint.cr
      </a>
    
    <br/>
  







  <h2>
    <a id="class-method-summary" class="anchor" href="#class-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#validator:AVD::Validator::ValidatorInterface-class-method" class="signature"><strong>.validator</strong> : AVD::Validator::ValidatorInterface</a>
        
          <div class="summary"><p>Returns a new <code><a href="../Athena/Validator/Validator/ValidatorInterface.html">AVD::Validator::ValidatorInterface</a></code>.</p></div>
        
      </li>
    
  </ul>







<div class="methods-inherited">
  
</div>




  <h2>
    <a id="class-method-detail" class="anchor" href="#class-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Detail
  </h2>
  
    <div class="entry-detail" id="validator:AVD::Validator::ValidatorInterface-class-method">
      <div class="signature">
        
        def self.<strong>validator</strong> : <a href="../Athena/Validator/Validator/ValidatorInterface.html">AVD::Validator::ValidatorInterface</a>

        <a class="method-permalink" href="#validator:AVD::Validator::ValidatorInterface-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Returns a new <code><a href="../Athena/Validator/Validator/ValidatorInterface.html">AVD::Validator::ValidatorInterface</a></code>.</p>

<pre><code>validator <span class="o">=</span> <span class="t">AVD</span>.validator

validator.validate <span class="s">&quot;foo&quot;</span>, <span class="t">AVD</span><span class="t">::</span><span class="t">Constraints</span><span class="t">::</span><span class="t">NotBlank</span>.<span class="k">new</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/athena-framework/validator/blob/f63e700e77ee3e7f198c2d34197b4e1f29fd69e4/src/athena-validator.cr#L435" target="_blank">View source</a>]
        
      </div>
    </div>
  






</div>

</body>
</html>
